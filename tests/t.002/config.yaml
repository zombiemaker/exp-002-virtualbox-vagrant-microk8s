# yaml-language-server: $schema=https://raw.githubusercontent.com/zombiemaker/exp-002-virtualbox-vagrant-microk8s/main/schemas/config-file-schema-v0.1.0.json
---
# Under development - not operational
api-version: v0.2
virtual-resource-provider:
  # Only virtualbox has been implemented
  provider: virtualbox
  vagrant-config:
    runtime_vm_shared_directory: /vagrant/.runtime
  hyper-v-config:

# Configuration for all region level deployment
region-config:
  regions: ["us-east"]
  deploy:
    k8s-cluster-for-platform-services: false
    k8s-cluster-for-product-services: true
  number-of-clusters-for-product-services: 1



# This is an non-managed K8s cluster that runs application systems that provide services
# to manage the managed K8s clusters that run your product application systems
k8s-cluster-for-platform-services:
  debug: false
  deploy:
    elb: true
    edns: false
    eca: false
    k8s_datastore: false
    k8s_master: true
    k8s_worker: false
  availability_zones:
    region-1-azs: []
    region-2-azs: []
    region-3

  master_nodes_per_cluster: 3
  worker_nodes_per_cluster: 0
  ip_addresses_reserved_per_cluster: 5
  # Cluster external bgp load balancer
  elb-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
  # Cluster external dns service provider
  edns-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
  # Cluster external tls certificate authority
  eca-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
  # Cluster datastore (e.g., etcd)
  k8s-datastore-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
  # Cluster master nodes
  k8s-master-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 2048
        cpus: 1
  # Cluster worker nodes
  k8s-worker-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
k8s-cluster-for-product-services:
  # of managed K8s clusters per region
  number-of-managed-clusters: 1
  deploy:
    elb: true
    edns: false
    eca: false
    k8s_datastore: false
    k8s_master: true
    k8s_worker: false
  debug: false
  availability_zones_per_region: 3
  master_nodes_per_cluster: 3
  worker_nodes_per_cluster: 0
  ip_addresses_reserved_per_cluster: 5
  # Cluster external bgp load balancer
  elb-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
  # Cluster external dns service provider
  edns-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
  # Cluster external tls certificate authority
  eca-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
  # Cluster datastore (e.g., etcd)
  k8s-datastore-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1
  # Cluster master nodes
  k8s-master-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 2048
        cpus: 1
  # Cluster worker nodes
  k8s-worker-vm:
    vagrant-config:
      vagrant-box: bento/ubuntu-20.04
      virtualbox:
        gui: true
        memory: 1024
        cpus: 1